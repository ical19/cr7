<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flow Estimasi CR7 - Visual Infografis</title>

  <!-- Mermaid.js -->
  <script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({
      startOnLoad: true,
      theme: "neutral",
      themeVariables: {
        fontFamily: "Poppins, sans-serif",
        primaryColor: "#ffffff",
        primaryBorderColor: "#3b82f6",
        lineColor: "#3b82f6",
        fontSize: "15px",
      },
    });
  </script>

  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #faf7f2;
      margin: 0;
      padding: 40px 15px;
      color: #333;
    }

    h1 {
      text-align: center;
      font-size: 2.3rem;
      font-weight: 700;
      color: #1a237e;
      margin-bottom: 20px;
    }

    .diagram-wrapper {
      background: #fff;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      max-width: 1200px;
      margin: 0 auto;
    }

    .mermaid {
      display: flex;
      justify-content: center;
    }

    /* Node styles */
    .mermaid svg {
      max-width: 100%;
      height: auto;
    }

    .node rect {
      rx: 10px;
      ry: 10px;
    }

    /* Custom colors via classDef */
    .node rect, .node polygon {
      stroke-width: 2px;
    }

    /* Legend */
    .legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 25px 0;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      background: #fff;
      padding: 6px 12px;
      border-radius: 50px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    .legend-color {
      width: 14px;
      height: 14px;
      border-radius: 3px;
    }

    .legend-process { background: #dbeafe; border: 2px solid #2563eb; }
    .legend-decision { background: #fff8e1; border: 2px solid #f59e0b; }
    .legend-success { background: #dcfce7; border: 2px solid #22c55e; }
    .legend-warning { background: #fee2e2; border: 2px solid #ef4444; }

    footer {
      text-align: center;
      margin-top: 30px;
      color: #666;
      font-size: 14px;
    }
  </style>
</head>
<body>

  <h1>üí° Flow Estimasi CR7</h1>

  <div class="legend">
    <div class="legend-item"><div class="legend-color legend-process"></div> Proses</div>
    <div class="legend-item"><div class="legend-color legend-decision"></div> Keputusan</div>
    <div class="legend-item"><div class="legend-color legend-success"></div> Selesai</div>
    <div class="legend-item"><div class="legend-color legend-warning"></div> Revisi / Belum</div>
  </div>

  <div class="diagram-wrapper">
    <div class="mermaid">
     flowchart TD
    A([Mulai Estimasi CR7]) --> B[/Teknisi Mengisi Form Estimasi/]
    B --> DB1[(Sistem CR7)]
    DB1 --> SP1((Sparepart))
    SP((Sparepart)) --> C[/Petugas part Mengisi harga sparepart/]
    C --> DB2[(Sistem CR7)]
    DB2 --> TK[Teknisi cek Estimasi]
    TK --> TK2{Tambah Estimasi}

    TK2 --> |Ya ‚úÖ| TK3[/Teknisi menambah part Estimasi/]
    TK3 --> SP2((Sparepart))
    TK2 --> |Tidak ‚ùå| TK4["`Kirim ke Service Advisor
    Kirim ke PTM (controller)`"]
    TK4 --> SA((Service Advisor/PTM))

    SA1((Service Advisor/PTM)) --> E[/Service Advisor mengisi harga jasa/]
    E --> DB3[(Sistem Cr7)]
    DB3 --> PTM[PTM cek harga jasa]
    PTM --> PTM2{Harga jasa sudah di isi?}
    PTM2 --> |Ya ‚úÖ| PTM3{Ada info penggantian dari SA?}
    PTM3 --> |Ya ‚úÖ| PTMF4{Estimasi disetujui Semua?}
    PTMF4 --> |Ya ‚úÖ| PTMF5[/Rubah status ke Released/]
    PTMF5 --> selesai1([Selesai])
    PTMF4 --> |Tidak ‚ùå| PTMF6[Coret item sudah ganti]
    PTMF6 --> MRAF((MRA / MRS))
    PTM3 --> |Tidak ‚ùå| PTM7["`Kirim ke MRA untuk FU`"]
    PTM7 --> PTM8[(Sistem CR7)]
    PTM8 --> MRAF1((MRA / MRS))

    PTM2 --> |Tidak ‚ùå| PTM6[Informasikan ke SA]
    PTM6 --> SA2((Service Advisor/PTM))

    MRA1((MRA / MRS)) --> MRA2[/Follow UP Customer/]
    MRA2 --> MRA3{Customer mau ganti?}
    MRA3 --> |Ya ‚úÖ| MRA4["`1.Jadwalkan penggantian
    2.Order ke petugas Part
    3.Remark hasil FU`"]
    MRA4 --> MRA6[(Sistem CR7)]
    MRA3 --> |Tidak ‚ùå| MRA5[Remark hasil FU]
    MRA5 --> MRA6[(Sistem CR7)]
    MRA6 --> selesai2([Selesai])

    %% === CLASS DEFINITIONS ===
    classDef startEnd fill:#dcfce7,stroke:#22c55e,stroke-width:2px,color:#166534;  %% Mulai/Selesai
    classDef process fill:#dbeafe,stroke:#2563eb,stroke-width:2px,color:#1e3a8a;    %% Proses umum
    classDef decision fill:#fff8e1,stroke:#f59e0b,stroke-width:2px,color:#78350f;  %% Percabangan
    classDef warning fill:#fee2e2,stroke:#ef4444,stroke-width:2px,color:#7f1d1d;   %% Flow selesai
    classDef database fill:#E4DACA,stroke:#9A8C98,stroke-width:2px,color:#4B3F72;   %% Sistem CR7
    classDef sparepart fill:#ECAE31,stroke:#b45309,stroke-width:2px,color:#78350f; %% Sparepart
    classDef serviceAdvisor fill:#C4F1F9,stroke:#0e7490,stroke-width:2px,color:#164e63; %% SA / PTM
    classDef mra fill:#ede9fe,stroke:#8b5cf6,stroke-width:2px,color:#4c1d95;       %% MRA / MRS

    %% === CLASS ASSIGNMENTS ===
class A startEnd;
class selesai1,selesai2 warning;

class B,C,E,TK,PTM,TK3,PTM6,PTMF5,PTMF6,MRA2,MRA4,MRA5 process;
class TK2,PTM2,PTM3,PTMF4,MRA3 decision;

class DB1,DB2,DB3,MRA6,PTM8 database;

class SP,SP1,SP2 sparepart;

class SA,SA1,SA2 serviceAdvisor;
class PTM4,PTM7 serviceAdvisor;

class MRA,MRA1,MRAF,MRAF1 mra;


    </div>
  </div>

  <footer>¬© 2025 Estimasi CR7 Visual Flow | Dibuat dengan ‚ù§Ô∏è Mermaid.js</footer>

</body>
</html>
