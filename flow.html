<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flow Estimasi CR7 - Visual Infografis</title>

  <!-- Mermaid.js -->
  <script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({
      startOnLoad: true,
      theme: "neutral",
      themeVariables: {
        fontFamily: "Poppins, sans-serif",
        primaryColor: "#ffffff",
        primaryBorderColor: "#3b82f6",
        lineColor: "#3b82f6",
        fontSize: "15px",
      },
    });
  </script>

  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #faf7f2;
      margin: 0;
      padding: 40px 15px;
      color: #333;
    }

    h1 {
      text-align: center;
      font-size: 2.3rem;
      font-weight: 700;
      color: #1a237e;
      margin-bottom: 20px;
    }

    .diagram-wrapper {
      background: #fff;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      max-width: 1200px;
      margin: 0 auto;
    }

    .mermaid {
      display: flex;
      justify-content: center;
    }

    /* Node styles */
    .mermaid svg {
      max-width: 100%;
      height: auto;
    }

    .node rect {
      rx: 10px;
      ry: 10px;
    }

    /* Custom colors via classDef */
    .node rect, .node polygon {
      stroke-width: 2px;
    }

    /* Legend */
    .legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 25px 0;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      background: #fff;
      padding: 6px 12px;
      border-radius: 50px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    .legend-color {
      width: 14px;
      height: 14px;
      border-radius: 3px;
    }

    .legend-process { background: #dbeafe; border: 2px solid #2563eb; }
    .legend-decision { background: #fff8e1; border: 2px solid #f59e0b; }
    .legend-success { background: #dcfce7; border: 2px solid #22c55e; }
    .legend-warning { background: #fee2e2; border: 2px solid #ef4444; }

    footer {
      text-align: center;
      margin-top: 30px;
      color: #666;
      font-size: 14px;
    }
  </style>
</head>
<body>

  <h1>üí° Flow Estimasi CR7</h1>

  <div class="legend">
    <div class="legend-item"><div class="legend-color legend-process"></div> Proses</div>
    <div class="legend-item"><div class="legend-color legend-decision"></div> Keputusan</div>
    <div class="legend-item"><div class="legend-color legend-success"></div> Selesai</div>
    <div class="legend-item"><div class="legend-color legend-warning"></div> Revisi / Belum</div>
  </div>

  <div class="diagram-wrapper">
    <div class="mermaid">
      flowchart TD
        A([Mulai Estimasi CR7]) --> B[Teknisi Mengisi Form Estimasi]
        B --> C[Data Dikirim ke Sparepart]
        C --> D[Sparepart Mengisi Harga Part di Website CR7]
        D --> E[Flow Kembali ke Teknisi]
        E --> F{Perlu Pengeditan?}

        F -->|Ya ‚úÖ| G[Kembali ke Sparepart untuk Edit Harga/Barang]
        F -->|Tidak ‚ùå| H[Kirim ke PTM / Controller]
        H --> I[Kirim ke Service Advisor]

        I --> J{Service Advisor Sudah Mengisi Harga Jasa?}
        J -->|Belum ‚ùå| K[PTM Ingatkan SA untuk Mengisi]
        K --> L[Status: Sent]
        J -->|Sudah ‚úÖ| M[PTM Mengecek dan Memberi Status Released]

        M --> N{Estimasi Di-ACC Customer?}
        N -->|Ya ‚úÖ| O[PTM Dapat Edit Estimasi - Hapus Komponen Tertentu]
        O --> P[Estimasi Diteruskan ke MRA untuk Follow Up Customer]
        N -->|Tidak ‚ùå| Q[MRA Melakukan Follow Up dan Isi Remark 'Belum Ganti']

        P --> R{Hasil Follow Up?}
        R -->|ACC ‚úÖ| S[Status Akhir: Customer Menyetujui Estimasi]
        R -->|Belum ‚ùå| T[Status: Menunggu Keputusan / Remark Follow Up]

        S --> U([Proses Selesai])
        T --> U

        %% Styling nodes
        classDef startEnd fill:#dcfce7,stroke:#22c55e,stroke-width:2px,color:#166534;
        classDef process fill:#dbeafe,stroke:#2563eb,stroke-width:2px,color:#1e3a8a;
        classDef decision fill:#fff8e1,stroke:#f59e0b,stroke-width:2px,color:#78350f;
        classDef warning fill:#fee2e2,stroke:#ef4444,stroke-width:2px,color:#7f1d1d;
        classDef success fill:#dcfce7,stroke:#22c55e,stroke-width:2px,color:#166534;

        class A,U success;
        class B,C,D,E,G,H,I,K,L,M,O,P,Q process;
        class F,J,N,R decision;
        class T warning;
        class S,U success;
    </div>
  </div>

  <footer>¬© 2025 Estimasi CR7 Visual Flow | Dibuat dengan ‚ù§Ô∏è Mermaid.js</footer>

</body>
</html>
